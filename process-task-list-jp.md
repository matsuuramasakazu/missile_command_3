---
description: 
globs: 
alwaysApply: false
---
# タスクリスト管理

PRD（プロダクト要件定義）の完了状況を追跡するためのタスクリストの実行を管理するガイドラインです。

## タスクの実装

- **一度に1つのサブタスクのみ実行：**  
  次のサブタスクを開始する前に、必ずユーザーに許可を求め、「yes」または「y」と言われてから進めてください。

- **完了プロトコル：**  
  1. **サブタスク**を完了したら、すぐに `[ ]` を `[x]` に変更して完了としてマークしてください。
  2. 親タスクのすべてのサブタスクが `[x]` になった場合、以下の手順を実行してください：
     - フルテストスイートを実行する。（例：`pytest`、`npm test`、`bin/rails test` など）
     - **すべてのテストがパスした場合のみ**：
       - 一時ファイルや一時コードを削除
       - featureブランチを作成してチェックアウトする。（`git checkout -b feature-[タスク番号]`）
       - 変更をステージングする。（`git add .`）
     - **コミット**：以下の条件を満たす説明的なコミットメッセージを使用：
       - コミットメッセージは慣例的な形式（`feat:`、`fix:`、`refactor:` など）を使用
       - 親タスクで達成した内容を要約
       - 主な変更点や追加点を列挙
       - タスク番号とPRDの文脈を参照
       - 複数行のコミットメッセージを使用する際は一時ファイルにコミットメッセージを書き込み、それを`git commit -F`で指定する方法を採用してください。
       - **コミットが正常に完了したら**、一時ファイルを削除してください。(`del [一時ファイル名]`)
       - 変更をpushする。（`git push origin feature-[タスク番号]:feature-[タスク番号]`）
     - **リモートリポジトリにPull Request**：
       - mainブランチへのプルリクエストを作成する。
       - プルリクエストにおけるコードレビューの完了の連絡を待つ。
       - コードレビュー完了の連絡を受けたらコメントの内容を確認して必要ならコードを修正する。
       - ユーザーにPRのマージが完了したか問い合わせてください。
       - マージ完了の回答があったらmainブランチにcheckoutしてリモートリポジトリの変更をPullしてください。
  3. すべてのサブタスクが完了し、変更がマージされたら、**親タスク**も `[x]` にして完了としてマークしてください。


- 各サブタスクの完了後は、ユーザーの承認を待ってから次に進んでください。

## タスクリストのメンテナンス

1. **作業中はタスクリストを随時更新：**
   - 上記のプロトコルに従って、タスクおよびサブタスクを `[x]` にして完了としてマーク
   - 新たに発生したタスクは追加

2. **「関連ファイル」セクションを維持：**
   - 作成または変更したすべてのファイルをリストアップ
   - 各ファイルの目的を1行で記述

## AIへの指示

タスクリストを扱う際、AIは以下を遵守すること：

1. 重要な作業が完了するたびに、タスクリストファイルを定期的に更新すること
2. 完了プロトコルに従うこと：
   - 完了した**サブタスク**を `[x]` にする
   - **すべての**サブタスクが `[x]` になったら、**親タスク**も `[x]` にする
3. 新たに発見されたタスクを追加すること
4. 「関連ファイル」セクションを正確に保つこと
5. 作業開始前に、次に取り組むべきサブタスクを確認すること
6. サブタスクを実装したら、ファイルを更新し、ユーザーの承認を待つこと