---
description: 
globs: 
alwaysApply: false
---
# タスクリスト管理

PRD（プロダクト要件定義）の完了状況を追跡するためのMarkdownファイル内のタスクリスト管理ガイドライン

## タスクの実装

- **一度に1つのサブタスクのみ実行：**  
  次のサブタスクを開始する前に、必ずユーザーに許可を求め、「yes」または「y」と言われてから進めてください。

- **完了プロトコル：**  
  1. **サブタスク**を完了したら、すぐに `[ ]` を `[x]` に変更して完了としてマークしてください。
  2. 親タスクのすべてのサブタスクが `[x]` になった場合、以下の手順を実行してください：
     - **最初に**：フルテストスイートを実行（例：`pytest`、`npm test`、`bin/rails test` など）
     - **すべてのテストがパスした場合のみ**：変更をステージング（`git add .`）
     - **クリーンアップ**：一時ファイルや一時コードを削除
     - **コミット**：以下の条件を満たす説明的なコミットメッセージを使用：
       - コミットメッセージは慣例的な形式（`feat:`、`fix:`、`refactor:` など）を使用
       - 親タスクで達成した内容を要約
       - 主な変更点や追加点を列挙
       - タスク番号とPRDの文脈を参照
       - **`-m` フラグを使って1行ずつ記述する単一行コマンド形式で記述** 例：

         ```
         git commit -m "feat: add payment validation logic" -m "- カード種別と有効期限の検証を追加" -m "- 境界ケースのユニットテストを追加" -m "PRDのT123に関連"
         ```
  3. すべてのサブタスクが完了し、変更がコミットされたら、**親タスク**も `[x]` にして完了としてマークしてください。

- 各サブタスクの完了後は、ユーザーの承認を待ってから次に進んでください。

## タスクリストのメンテナンス

1. **作業中はタスクリストを随時更新：**
   - 上記のプロトコルに従って、タスクおよびサブタスクを `[x]` にして完了としてマーク
   - 新たに発生したタスクは追加

2. **「関連ファイル」セクションを維持：**
   - 作成または変更したすべてのファイルをリストアップ
   - 各ファイルの目的を1行で記述

## AIへの指示

タスクリストを扱う際、AIは以下を遵守すること：

1. 重要な作業が完了するたびに、タスクリストファイルを定期的に更新すること
2. 完了プロトコルに従うこと：
   - 完了した**サブタスク**を `[x]` にする
   - **すべての**サブタスクが `[x]` になったら、**親タスク**も `[x]` にする
3. 新たに発見されたタスクを追加すること
4. 「関連ファイル」セクションを正確に保つこと
5. 作業開始前に、次に取り組むべきサブタスクを確認すること
6. サブタスクを実装したら、ファイルを更新し、ユーザーの承認を待つこと